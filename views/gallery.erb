<div class="mx-auto max-w-6xl p-5" data-controller="websocket">
  <!-- Fixed right sidebar with all controls -->
  <ul class="fixed right-4 top-4 z-50 flex flex-col gap-2 list-none m-0 p-0">
    <!-- WebSocket connection status indicator -->
    <li class="flex items-center justify-between rounded-lg bg-white p-2 text-xs shadow-lg dark:bg-gray-800">
      <div class="h-2 w-2 rounded-full bg-gray-500 mr-2 ml-2" data-websocket-target="statusDot"></div>
      <span class="text-gray-600 dark:text-gray-400 mr-1" data-websocket-target="statusText">
        Disconnected
      </span>
    </li>

    <!-- Authentication status -->
    <% if current_user.authenticated? %>
      <li class="flex items-center justify-between rounded-lg bg-white px-3 py-2 text-xs shadow-lg dark:bg-gray-800">
        <div class="icon-user mr-2"></div>
        <span class="text-gray-600 dark:text-gray-400">
          <%= current_user.user_info["display_name"] || current_user.user_info["username"] %>
        </span>
      </li>
      <li>
        <a href="/auth/logout"
           data-turbo="false"
           class="flex items-center justify-between rounded-lg bg-red-500 px-3 py-2 text-xs text-white shadow-lg hover:bg-red-600"
        >
          <div class="icon-log-out mr-2"></div>
          <span>Logout</span>
        </a>
      </li>
    <% else %>
      <li>
        <a href="/auth/login"
           class="flex items-center justify-between rounded-lg bg-blue-500 px-3 py-2 text-xs text-white shadow-lg hover:bg-blue-600"
        >
          <div class="icon-log-in mr-2"></div>
          <span>Login</span>
        </a>
      </li>
    <% end %>

    <!-- Presets link -->
    <li>
      <a href="/presets"
         data-turbo-frame="presets-modal-frame"
         class="flex items-center justify-between rounded-lg bg-white px-3 py-2 text-xs shadow-lg hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700"
      >
        <div class="icon-file-badge mr-2"></div>
        <span class="text-gray-600 dark:text-gray-400">Presets</span>
      </a>
    </li>
  </ul>

  <h1
    class="mb-8 flex items-center justify-center gap-3 text-center text-3xl font-bold text-gray-800 dark:text-gray-200"
  >
    <img src="/images/artiste.png" alt="Artiste" class="h-12 w-12 rounded-full object-cover" />
    Artiste
  </h1>

  <% if photos.empty? %>
    <div class="mt-12 text-center italic text-gray-600 dark:text-gray-400">No photos found.</div>
  <% else %>
    <%= erb :grid, locals: { photos: , offset: PHOTO_BATCH_SIZE, limit: PHOTO_BATCH_SIZE, has_more: photos.length == limit, has_id: true } %>
  <% end %>
</div>
<div data-controller="modal" data-modal-query-param-value="detail">
  <turbo-frame id="photo-modal-frame" data-modal-target="frame" <% if params[:detail] %> src="<%= "/photo-details/#{params[:detail]}" %>" <% end %> />
</div>
<div data-controller="modal" data-modal-query-param-value="presets">
  <turbo-frame id="presets-modal-frame" data-modal-target="frame" <% if params[:presets] %> src="/presets" <% end %> />
</div>
